"use strict";angular.module("conserjeApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap","ui.select2","ui.mask","ui.validate","ngGrid"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/volunteers",{templateUrl:"views/volunteer-list.html",controller:"VolunteerListCtrl"}).when("/volunteer/new",{templateUrl:"views/new-volunteer.html",controller:"NewVolunteerCtrl"}).when("/volunteer/:volunteerId",{templateUrl:"views/volunteer-timesheets.html",controller:"VolunteerTimesheetsCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$resource",function(a,b){var c=b("http://localhost:3000/companies"),d=c.query(function(){a.company=d[0]})}]),angular.module("conserjeApp").controller("MainCtrl",["$scope","$resource","$rootScope","Volunteer",function(a,b,c,d){var e=d.query(function(){a.volunteers=e}),f=b("http://localhost:3000/departments"),g=f.query(function(){a.departments=g});a.processForm=function(){var c=b("http://localhost:3000/employees/sign_in"),e=new c(a.formData);e.$save(function(){a.formData={};var b=d.query(function(){a.volunteers=b})})},a.signOut=function(c){$(".btn-sign-out#"+c).prop("disabled",!0).text("Signing Out...");var e=b("http://localhost:3000/employees/sign_out"),f=new e({employeeId:c});f.$save(function(){var b=d.query(function(){a.volunteers=b})})}}]),angular.module("conserjeApp").service("Volunteer",["$resource",function(a){return a("http://localhost:3000/employees/:volunteerId",{})}]),angular.module("conserjeApp").controller("VolunteerListCtrl",["$scope","$resource","$rootScope",function(a,b){var c=b("http://localhost:3000/employees/:volunteerId"),d=c.query(function(){a.volunteers=d})}]),angular.module("conserjeApp").controller("VolunteerTimesheetsCtrl",["$scope","$resource","$filter","$routeParams","$rootScope",function(a,b,c,d){a.volunteerId=d.volunteerId;var e=b("http://localhost:3000/employees/:volunteerId",{},{get:{method:"GET",isArray:!0}}),f=e.get({volunteerId:a.volunteerId},function(){a.volunteer=f[0],console.log(a.volunteer)});console.log(a.volunteer);var g=b("http://localhost:3000/employees/:volunteerId/attendance"),h=g.get({volunteerId:a.volunteerId},function(){console.log(h),a.timesheets=h.timesheets,angular.forEach(a.timesheets,function(a){console.log(a.total_attendance)})});a.gridOptions={data:"timesheets",sortInfo:{fields:["date_from"],directions:["desc"]},columnDefs:[{field:"date_from",displayName:"Date"},{field:"total_attendance|number:2",displayName:"Hours Worked"},{field:"department_id[1]",displayName:"Work Area"}]}}]),angular.module("conserjeApp").controller("NewVolunteerCtrl",["$scope","$resource","$rootScope",function(a,b,c){a.formData={},a.alerts=[];var d=b("http://localhost:3000/employees/:volunteerId"),e=d.query(function(){a.volunteers=e});a.processForm=function(){var b=new d(a.formData);b.$save(function(b){console.log(b),console.log(c.company),a.formData={},a.alerts.push({type:"success",msg:"<p>Welcome to "+c.company.name+", "+b.name+"! You are volunteer #"+b.id+".</p><p>Would you like to <a href=#>Sign In</a>?</p>"})})},a.closeAlert=function(b){a.alerts.splice(b,1)}}]);